<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2016-06-21">

<title>What is the future of coral reefs? - ICRS summary – Seascapemodels</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f93c2b1f3f0577f377aefa4848a86a36.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-6.7.2/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-6.7.2/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Seascapemodels</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../bluecology_blog.html"> 
<span class="menu-text"><i class="fa-regular fa-newspaper" aria-label="newspaper"></i> Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../people.html"> 
<span class="menu-text"><i class="fa-regular fa-user" aria-label="user"></i> People</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../code.html"> 
<span class="menu-text"><i class="fa-solid fa-laptop-code" aria-label="laptop-code"></i> R tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com.au/citations?hl=en&amp;user=1qG6yFMAAAAJ&amp;view_op=list_works&amp;sortby=pubdate"> 
<span class="menu-text"><i class="fa-brands fa-google-scholar" aria-label="google-scholar"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://discover.utas.edu.au/C.J.Brown"> 
<span class="menu-text"><i class="fa-solid fa-building-columns" aria-label="building-columns"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cbrown5"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/bluecology.bsky.social"> 
<span class="menu-text"><i class="fa-brands fa-bluesky" aria-label="bluesky"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/christopher-brown-32466785/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">What is the future of coral reefs? - ICRS summary</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">research</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 21, 2016</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="what-is-the-future-of-coral-reefs" class="level2">
<h2 class="anchored" data-anchor-id="what-is-the-future-of-coral-reefs">What is the future of coral reefs?</h2>
<p><em>Coral reef ecosystems face unprecedented threats, but stories of people give me hope for the future</em></p>
<p>The International Coral Reef Symposium in Honolulu comes on the back of the worst global coral bleaching event yet observed. Global disasters often leave people wondering what hope there is for the future - particularly given insufficient attempts to curb greenhouse gas emissions.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-1.png" alt="" class="image_float">
<p>
Source: http://twitter.com
</p>
</div>
<p>Coral reefs will never be the same as they were. I once saw a talk from Charlie Veron about his efforts to create a global coral atlas (at the conference he announced this is now <a href="http://www.coralsoftheworld.org/page/home/">online</a>). He has dived perhaps more of the world’s reefs than anyone. In an incredibly depressing ending to his talk he stated no-one will ever get to experience coral reefs as he has.</p>
<section id="communicating-the-loss-and-solutions" class="level3">
<h3 class="anchored" data-anchor-id="communicating-the-loss-and-solutions">Communicating the loss and solutions</h3>
<p>Communicating the loss of coral reefs has been emphasised as an important role for scientists at earlier meetings. A few years ago the rhetoric was all about how scientists need to get out there more - engage with public, get in the media, influence policy, be a force on social media. We do all of this now.</p>
<p>I actually met, in person, a <a href="https://twitter.com/oceansolutions"><em>professional</em> science communicator</a> at this conference. I am sure scicomm people were around at earlier conferences, but not common enough for me to meet one.</p>
<p>Social media use is a key part of this engagement. Terry Hughes noted in a panel session that every politician has a twitter account, so if they believe it can change people’s minds, we need to be on there too. As an example, Knowlton talked about the incredible success of the []#oceanoptimism](https://twitter.com/hashtag/oceanoptimism?src=hash) hashtag for engaging the public with ocean solutions through twitter.</p>
<p>Social media use at ICRS is orders of magnitude greater than at earlier conferences. Twitter is increasingly popular and the #ICRS2016 hashtag has had widespread impact. A few quick web searches suggest #ICRS2016 had ~240 users and reached over 540 000 people. Check out the <a href="https://twitter.com/hashtag/ICRS2016?src=hash">#ICRS2016 feed</a> or some of the top tweeters e.g.&nbsp;<a href="https://twitter.com/OneSwellLife"><span class="citation" data-cites="OneSwellLife">@OneSwellLife</span></a>, <a href="https://twitter.com/physiologyfish"><span class="citation" data-cites="physiologyfish">@physiologyfish</span></a> and <a href="https://twitter.com/ultimatemegs"><span class="citation" data-cites="ultimatemegs">@ultimatemegs</span></a> to read about the action.</p>
<p>These efforts to communicate were apparent at this conference in a subtle way too - the conversation has moved away from how we need communicate, and instead is now about how we can communicate better.</p>
<p>Peter Kareiva and John Pandolfi both spoke about the need to communicate more of the nuances of science to the media - especially the uncertainty inherent in forecasting the future under different policies. Kareiva used the example of the <a href="http://compassblogs.org/wp-content/uploads/2014/11/COMPASSMessageBoxBlank.pdf">message box</a>, a commonly used tool for turning academic science into stories for the media or policy. He argued that while this is a useful tool, there it does nothing to help us communicate critical thresholds, impacts and uncertainty - key issues in much of reef science.</p>
<p>In her plenary Nancy Knowlton acknowledged the improvement in communication in coral reef science. However, she implored us to tell <strong>stories</strong> not statistics. In particularly, stories of people. Terry Pratchett, the sci-fi author once said we shouldn’t be called <em>Homo sapiens</em>, the ‘intelligent human’, but <em>Pan narrans</em> the <strong>story telling ape</strong> (thanks to Beth Fulton for that quote).</p>
<p>And it is <strong>stories of people</strong> that give me hope for coral reefs.</p>
</section>
<section id="science-for-solutions" class="level3">
<h3 class="anchored" data-anchor-id="science-for-solutions">Science for solutions</h3>
<p>Cinner and colleagues published a paper about coral reef <a href="http://www.nature.com/nature/journal/vaop/ncurrent/full/nature18607.html"><strong>bright spots</strong></a> last week - places where society and managers are doing better than we would expect at managing reef fish (also presented at ICRS2016). ‘Brights spots’ has become an oft repeated meme at this conference.</p>
<p>One of these ‘bright spots’ is Palau and we saw two plenaries about the island nation. The <strong>President Remengesau of Palau</strong> spoke on <a href="http://www.seascapemodels.org/research/2016/06/20/ICRS-day1.html">day one</a> about the nation’s solution’s orientated approach to reef management. Palau is a world leader in declaring protected areas. Palau’s leadership perhaps stems from a strong traditional management culture. Thus, Palau is a key study area where we can learn about successful management.</p>
<p>I am finding the study of society’s role in management success brings much more <strong>ocean optimism</strong> than the pure ecological study of reefs.</p>
<p>When I started my career everyone was saying ecological and physical scientists need to collaborate more with economists and social scientists, but barely anyone was doing so. Now things are turning around.</p>
<p>By bringing together <strong>social sciences, economists and ecologists we creating a solution orientated science</strong>. As Knowlton and others have oft stated, solutions are what give us hope and empower people to take action.</p>
<p>The power of solutions is evidenced in the feelings of colleagues at this conference. Colleagues how primarily attended talks about the recent bleaching event were overwhelmingly depressed about the future of reefs, whereas those attending the numerous sessions on marine fishery management, social science, co-management were more optimistic.</p>
<p>There is growing acceptance that, while reefs will never return to their previous glory, we can make a better future.</p>
<p>In his plenary Pete Mumby talked about the need to study the <strong>subtleties of coral reefs</strong>. He argued we are facing a future with many ‘mediocre’ reefs, whereas in the past we have focussed our ecological studies on the best of the best, or the worst of the worst. Even degraded reefs can provide services to humans and support significant biodiversity. We need to better understand how management can maximise these benefits.</p>
<p>An important part of understanding trends is documenting the past - so much of which has not been recorded by science. But the past is documented in people’s stories, which Loren Mclenachan, Ruth Thurstan and others are using to <a href="http://www.sciencedirect.com/science/article/pii/S0964569115001271">push back our understanding</a>. For instance newspaper articles can document historical fish catch (Thurstan) and nautical charts can document erosion of reefs (Mclenachan).</p>
<p>Our future may be dominated by compromises between social, economic and ecological goals. It is hard for the reefs to have their fish and for us to eat them too. <a href="http://www.seascapemodels.org/research/2016/06/21/ICRS-day2.html">Charles Birkeland argued in his plenary</a> that coral reef ecosystems tend to <strong>import production</strong> not export production. Therefore, they cannot sustain industrial fishing. He talked about Palau’s scenario where its reefs have supported traditional fishing for generations, but the influx of tourists wanting to eat reef fish cannot be supported. Keeping to the solutions theme, he suggested focussing on much more productive pelagic fisheries to support tourism.</p>
<p>The realisation that compromises on ecological quality are needed to support human needs has seen the rise of ‘trade-offs’ analysis. Crow White gave a great introduction to the key steps to <a href="http://www.seascapemodels.org/research/2016/06/21/ICRS-day2.html">trade-offs analysis</a>.</p>
<p>Importantly, trade-offs can help us identify optimal compromises, that are often far better than the status-quo for both people and ecosystems.</p>
<p>Bozec has shown a strong trade-off between harvest of parrotfish and the <a href="http://www.pnas.org/content/113/16/4536">resilience of coral reefs</a>. However, the right type of management (banning trap fishing) can significantly improve the situation. Aaron MacNeil has similarly found the right type of management is key for <a href="http://www.nature.com/nature/journal/v520/n7547/full/nature14358.html">fish recovery globally</a>.</p>
<p>Trade-offs analysis is useful for pollution problems too. <a href="http://olesonlab.org/">Kirstin Oleson and her lab</a> are applying trade-offs analysis to ridge to reef management. They are finding that focussing restoration efforts in just a few areas in catchments can be a very cheap way to reduce sedimentation on reefs.</p>
</section>
<section id="challenges-for-coral-reef-sciences---gender-and-racial-representation" class="level3">
<h3 class="anchored" data-anchor-id="challenges-for-coral-reef-sciences---gender-and-racial-representation">Challenges for coral reef sciences - gender and racial representation</h3>
<p><strong>Developments in social science, the study of management and communication give me hope for the future of reefs.</strong> However, some ongoing trends in the <strong>culture of reef science give me cause for concern</strong>.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-13.png" alt="" class="image_float">
<p>
There are so many women doing amazing work for coral reefs at this conference. So why don’t they receive more recognition from our community? Source: http://twitter.com
</p>
</div>
<p>There is still a strong gender bias in coral reef science. Perhaps this is a hangover from the past, however I think it isn’t changing fast enough. I would estimate that talks and attendance at this conference is approximately 50:50, however it is easy to see that <strong>women are not provided with the same opportunities in our field as the men</strong>.</p>
<p>One story I heard was of a workshop where a senior (male) scientist said he would have liked to have invited more women, but “there just aren’t that many good female scientists to invite”.</p>
<p>Not all sexism is this blatant.</p>
<p><strong>Coral reef science as discipline has a problem with insufficient opportunity for women to receive recognition for their work</strong></p>
<p>The culture of science overwhelming recognises the volume of achievements. Often women have shorter careers than men, therefore the <strong>volume</strong> of female achievements is often on average smaller. This does not mean the <strong>quality</strong> of their work is lower. We often seem to conflate quality and quantity when we recognise leaders of our field.</p>
<p>I don’t think there is any lack of ‘good’ female reef scientists. In fact, some of the most compelling talks I have seen at ICRS were given by women (take <a href="http://www.seascapemodels.org/research/2016/06/21/ICRS-day2.html">Lizzie Mcleod’s for example</a>).</p>
<p><strong>It is important to note that both men and women and subject to this bias.</strong> I have discussed these issues with both male and female colleagues and both genders often find it harder to think of female leaders of our field.</p>
<p>To give some examples, this year we saw the award of the <a href="http://coralreefs.org/society-awards-and-grants/awards-fellowships/">7th Darwin medal</a>, the International Society for Reef Studies top award. There has <strong>never been a female laureate of the Darwin Medal</strong>.</p>
<p><strong>The chance of having no females in 7 Darwin medals is less than 1%</strong></p>
<p>Maybe the award just reflects a historical hangover of what used to be a male dominated field? I don’t think that’s the whole story. We saw a panel discussion on Wednesday night, that was meant to represent some leaders in our field discussing top issues. There were 2 women on a ten person panel.The chance of having two women out of ten people is 5% (reasonably assuming a 50:50 gender ratio at the conference). In science we often treat a 5% chance ‘statistically significant’, so therefore, 2/10 indicates a significant gender bias.</p>
<p>I want to be clear that I am not criticising any individual or organization. I do not intend to discredit individuals who have received accolades - they certainly deserved them. Neither am I criticising the International Society for Reef Studies. In fact, the society’s council has a reasonable gender balance and plenary talks at ICRS are balanced across genders.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-14.png" alt="" class="image_float">
<p>
Demographics of communicators on the Twitter #ICRS2016 group. Source: http://keyhole.co/preview_new
</p>
</div>
<p>What I am arguing for is a change in our culture. We could start by creating more formal opportunities to recognise the contributions of women to our field. For instance the International Society for Reef Studies could have an award for <strong>female leaders</strong> in coral reef sciences.</p>
<p>I suspect their are similar biases in cultural and racial inclusion in our field. I have not been keeping track of those, but ping me if you have useful link.</p>
<p>Informal changes are necessary to change our culture of gender bias. For some tips, check out <a href="https://cubistcrystal.wordpress.com/2015/05/10/but-what-can-i-do/">Jenny Martin’s blog</a>. Top of her list is <strong>recognise your own biases</strong>.</p>
<p>Coral reefs need diverse participation. It is many of the women of our field who are pushing us forward to find solutions to the problems facing reefs. Follow twitter: there are more women than men communicating reef science there. Many of people who have pioneered social sciences in reef science are also female.</p>
<p>I encourage all of you to value diverse career paths and contributions to our field. As <a href="http://www.nature.com/news/working-together-a-call-for-inclusive-conservation-1.16260">Tallis and Lubchenco have argued</a> the failure to include diverse views is stalling conservation efforts.</p>
</section>
<section id="a-future-for-coral-reefs" class="level3">
<h3 class="anchored" data-anchor-id="a-future-for-coral-reefs">A future for coral reefs?</h3>
<p>This conference has me both concerned about the enormity of the challenge coral reefs face, but also given me hope that science is contributing to a better future. I wanted to finish with some of the key lessons I have learned here.</p>
<ol type="1">
<li><p>We can’t always wait for better science. Our field leaders implore us to get involved with communicating to the public and informing management. The science he have now is sufficient to inform a better future.</p></li>
<li><p>We need to find more nuanced ways to communicate science to the public and decision makers. Often our key messages are lost because they are too dumbed down. Communicating uncertainty is a particularly important, but difficult, challenge.</p></li>
<li><p>Telling stories about people may be a powerful way to communicate a more nuanced message, that has greater uptake.</p></li>
<li><p>Coral reefs are of national political and economic significance, as evidenced by attendance at the conference by presidents from three countries.</p></li>
</ol>
<hr>
<p><a href="https://app.griffith.edu.au/phonebook/phone-details.php?id=1675412">Email me</a> or get in touch via <a href="https://twitter.com/bluecology">Twitter</a> if you want to contribute something (full acknowledgement will be given).</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.seascapemodels\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>