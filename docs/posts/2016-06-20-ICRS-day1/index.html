<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2016-06-20">

<title>International Coral Reef Symposium Day 1 – Seascapemodels</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f93c2b1f3f0577f377aefa4848a86a36.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-6.7.2/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-6.7.2/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Seascapemodels</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../bluecology_blog.html"> 
<span class="menu-text"><i class="fa-regular fa-newspaper" aria-label="newspaper"></i> Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../people.html"> 
<span class="menu-text"><i class="fa-regular fa-user" aria-label="user"></i> People</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../code.html"> 
<span class="menu-text"><i class="fa-solid fa-laptop-code" aria-label="laptop-code"></i> R tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com.au/citations?hl=en&amp;user=1qG6yFMAAAAJ&amp;view_op=list_works&amp;sortby=pubdate"> 
<span class="menu-text"><i class="fa-brands fa-google-scholar" aria-label="google-scholar"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://discover.utas.edu.au/C.J.Brown"> 
<span class="menu-text"><i class="fa-solid fa-building-columns" aria-label="building-columns"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/cbrown5"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/bluecology.bsky.social"> 
<span class="menu-text"><i class="fa-brands fa-bluesky" aria-label="bluesky"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/christopher-brown-32466785/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">International Coral Reef Symposium Day 1</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">research</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 20, 2016</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="international-coral-reef-symposium-day-1---my-highlights" class="level3">
<h3 class="anchored" data-anchor-id="international-coral-reef-symposium-day-1---my-highlights">International Coral Reef Symposium Day 1 - My highlights</h3>
<p><em>20 June 2016, Honolulu Hawaii</em></p>
<p>See also my blog on <a href="http://www.seascapemodels.org/research/2016/06/21/ICRS-key-insights.html"><strong>ICRS: Key insights</strong></a> that will be updated daily.</p>
<p><strong>Plenary</strong></p>
<p>The theme of this conference is science to policy and the plenary speakers wasted no time in emphasising the importance of communicating science to broader audiences to the 2500 people in attendance.</p>
<p>As evidence of the importance of reef science to policy, there are three presidents from sovereign nations in attendance at the conference.</p>
<p>Ruth Gates, president of the International Society for Reef Studies, wants us to tell the society how to best achieve impact to conserve coral reefs. To this ends, there will be special sessions on Friday to synthesise the conference’s science for policy and public communication.</p>
<p>Bob Richmond, the conference convener, emphasised the interdisciplinary nature of the conference, with scientists, educators and policy-makers in attendance. He said we need to move from academic outputs, like papers, towards policy impact.</p>
<p>A few stats &gt;1500 oral presentations, &gt;700 posters and 45 sessions. Ruth Gates acknowledged the ‘mammoth’ effort Bob Richmond and the conference organizing team had made to put this together. It’s great to be here and I am certainly grateful for their efforts to bring this event together.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-1.png" alt="" class="image_float">
<p>
Science to policy is the central theme of this conference. Source: http://twitter.com
</p>
</div>
<p><strong>Darwin Award Medal - Jack Randall</strong></p>
<p>Jack Randall received the Darwin award medal, the International Society for Reef Studies highest honour. Dr Randall gracefully accepted the award and told a series of amusing and touching stories from his career.</p>
<p>Dr Randall described purchasing his first aqua-lung. He didn’t know where to get an air tank from, so he went to the welding shop and got a bottle of oxygen (audience gasps). Someone told him later that if he had dived much deeper than he did, he wouldn’t be hear today (oxygen is toxic deeper than about 6 metres).</p>
<p>Dr Randall is an eminent coral reef fish taxonomist whose career has spanned &gt;70 years. During his career he described &gt;700 new marine species and pioneered scientific diving. You can read more about his productive and influential career on <a href="http://www.hakaimagazine.com/article-long/dr-fish">Christie Wilcox’s artile for the Hakai Magazine</a>.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-4.png" alt="" class="image_float">
<p>
Several people noted on Twitter that there have been 7 Darwin awards, but none yet to women. Let’s hope we see more nominations for women for the next award. Source: http://twitter.com
</p>
</div>
<p><strong>Keynote from President Remengesau of Palau</strong></p>
<p>President Remengesau said that in Palau the ocean is life and it brings us together. He wants us to realize that Palau is not a ‘small island state’ but a ‘large ocean state’. Like many Palauans the ocean is integral to his cultural identity and livelihood. He considers himself a fisherman who has taken time off for public service. Palau has a &gt;1000 year long history of ocean stewardship.</p>
<p>Palau has established shark sanctuaries and has led the effort to establish protected areas across the Pacific. Economic incentives have been integral to ocean protection. For instance, they have implemented a green tax as part of the depature tax at airports. This helps support ocean conservation efforts.</p>
<p>Another example comes from reef sharks, whicha are estimated to be worth $1.9 Million over the course of their lifespan - 100s times more than their value for shark-fin soup.</p>
<p>Traditional ecological knowledge is the backbone of Palau’s management and governance. Palau’s local scientists (sorry missed the name) emphasised the need to return to traditional governance systems, like species and temporal closures. Subsistence fishing is therefore a key part of their protected area efforts, as it ensures food-security of local people into the future.</p>
<p>President Remengesau believes large marine protected areas are essential for both marine biodiversity conservation and supporting local livelihoods. Palau has declared one of the world’s largest marine protected area systems. This decision is science-based.</p>
<p>Sustainable development of tourism and fisheries while protecting reef biodiversity that is threatened by climate change is a key dilemma faced by many island nations. Palau is pushing back by reducing local stresses to reefs. They are also strongly engaged with global policy push for greenhouse sustainability.</p>
<p>He concluded by saying we are at a cross-road for making decisions about the future health of reefs. It is essential to build trusting and long-term relationships to bridging the science to policy gap. We need 2016 to be the year of implementation for projects that can conserve reefs and dependent livelihoods.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-2.png" alt="" class="image_float">
<p>
Many people were touched and inspired by a memorial session on reef fish ecology held in honour of Dr Glenn Almany. I only met Glenn a few times, but the science he did has influenced my work and he has left a lasting legacy for coral reef science and conservation. Source: http://twitter.com
</p>
</div>
<p><strong>Corals of the world</strong></p>
<p>Dr Charlie Veron announced the <a href="http://www.coralsoftheworld.org/page/home/">Corals of the World</a>, an online platform for coral geography and identification. It’s exciting to see coral reef ecology going online and reaching a greater audience.</p>
<p><strong>Ecosystem-based management</strong></p>
<p>I was in the EBM session this morning. The session was opened by Fogarty, who spoke about the importance of considering trade-offs to achieve ecosystem based management.</p>
<p>Next up was Brainard, speaking on behalf of Pomeroy about the Coral Triangle Initiative’s Ecosystem Approach to Fishery Management. Brainard defined the Ecological approach to fishery management as trying to achieve a balance between ecological and societal wellbeing through effective governance.</p>
<p>Again Brainard emphasised the importance of balancing multiple objectives. Many countries, e.g.&nbsp;PNG, Indonesia, have a history of ecosystem approaches going back to the 90s. We have learned much from these early examples, such as the work on marine protected areas in the Philippines.</p>
<p>A challenge is that while the principles of ecosystem approach are in national policies, data shortages and barriers to implementation are major challenges.</p>
<p>Lopez-Rivera from NOAA fisheries talked about the challenges of implementing science-based management. An attempt to reform management in Puerto-Rico failed because stakeholders were not willing to compromise on important trade-offs between fishing access and management and they also felt there was not enough evidence to support management changes.</p>
<p>Nash <a href="http://twitter.com/@NasherK"><span class="citation" data-cites="NasherK">@NasherK</span></a> reviewed <a href="http://onlinelibrary.wiley.com/doi/10.1111/faf.12157/abstract?userIsAuthenticated=false&amp;deniedAccessCustomisedMessage=">indicators of fishing pressure</a> and found most didn’t quantify actual gradients in fishing pressure!</p>
<p>Nash worked in the Seychelles to develop indicators of fishing pressure. Importantly, high size diversity of herbivorous fish was key to <a href="http://onlinelibrary.wiley.com/doi/10.1111/1365-2664.12430/pdf">support coral reef resilience</a>. This suggests size diversity is a useful indicator of both fishing pressure and ecological responses to disturbances.</p>
<p>Altman, from Boston University, talked about how conventional approaches to management focus on protecting the state of ecosystems, e.g.&nbsp;number of species, biomass hotspots and so on. Whereas ecosystem based management often focusses on functions of biodiversity, like services to humans and resilience of ecosystems to disturbance.</p>
<p><strong>Tropicalisation of temperate reefs</strong></p>
<p>It has been an interesting year for temperature reefs. Extremely warm ocean temperatures this year, which are driving a global bleaching event on coral reefs, has also seen large migrations of tropical species to temperature waters.</p>
<div class="image_caption">
<img src="icrs-pic-tweet-3.png" alt="" class="image_float">
<p>
This years global bleaching event was on everyone’s mind. Source: http://twitter.com
</p>
</div>
<p>Australia’s south-east reefs are undergoing Tropicalisation. Booth has been doing surveys of tropical fish for many years now to find out which species are moving and to determine the <a href="http://onlinelibrary.wiley.com/doi/10.1111/faf.12036/abstract;jsessionid=102127543D8BA09FB5794653277E62CB.f03t04?userIsAuthenticated=false&amp;deniedAccessCustomisedMessage=">mechanisms driving their movement and establishment success</a>.</p>
<p>This summer has been particularly warm and has seen a large increase in the number of tropical fish arriving. Arrivals include surgeon fish - important herbivores on reefs that can change ecosystems through their herbivory. However, most don’t survive the winter, because it is too cold.</p>
<p>Booth joked that by the next conference, Sydney may house coral reefs. It has happened at a similar latitude in the <a href="http://onlinelibrary.wiley.com/doi/10.1029/2010GL046474/full">northern hemisphere</a>!</p>
<p>Sommer is testing the hypothesis that environmental filtering is stronger is areas of high abiotic stress. By looking at the traits of high latitude coral species, they found that species with more similar traits were more likely to <a href="http://onlinelibrary.wiley.com/doi/10.1890/13-1445.1/full">survive at higher latitudes</a>. So corals will probably only expand to areas that are similar to their core ranges.</p>
<p>Sommer also found that critical temperatures and temperature variability were more important for controlling coral species range edges than mean temperature - this is an important lesson for predictive modelling.</p>
<p>On Australia’s west coast, heat wave events are also seeing unprecedented recruitment of tropical fish in <a href="http://link.springer.com/article/10.1007/s10641-014-0339-3">temperate waters</a>. Following these changes will be important for future management of species like this grouper, which are important to fisheries.</p>
<p><strong>Marine protected areas</strong></p>
<p>Bob Pressey spoke about ineffective targets in conservation planning. Often reserves are ‘residual’ in that they are placed in areas that avoid pressures, like fishing, so don’t actually achieve anything for conservation.</p>
<p>We also need to be careful of coverage targets. Conservation objectives for area alone have become institutionalized, but the don’t reflect the quality of protection very well.</p>
<p>Finally, Pressey talked about the importance of assessing the counterfactual - what would have happened if we didn’t take a management action. For residual reserves what happened will be very similar to the counterfactual, so we discover that our action didn’t really have any impact for improving conservation.</p>
<p>Gabby Ahmadia provided a concrete example of designing a reserve monitoring program to <a href="http://rstb.royalsocietypublishing.org/content/370/1681/20140275.abstract">quantify the counterfactual</a>. She used impact evaluation methodology to identify paired ‘control-impact’ sites. They allow comparison of how biodiversity is faring inside protected areas to outside, while controlling for other differences, such as level of exposure to wind and access to markets.</p>
<p>Ahmadia showed that using this thorough evaluation methodology has a large effect on how you classify the success of MPA indicators like fish biomass.</p>
<p>Semmens presented analysis of citizen science data from the REEF surveys for Bonaire’s marine park. Bonaire’s park has a few small no-take protected areas, but largely allows subsistence fishing. There are many issues with citizen science data, however, Semmens points out that data collected by recreational divers on how many fish they see is ideal to evaluate the tourism experience.</p>
<p>Ceccarelli analysed effects of protection in the Great Barrier Reef marine park. The park mostly protects coral trout - the main fishery species. There is much functional redundancy across multiple species in the system, so overall fish community composition is <a href="http://onlinelibrary.wiley.com/doi/10.1002/ece3.934/full">similar inside and outside reserves</a>.</p>
<p>That’s all from me for day 1. If you have anything to add, feel free to <a href="https://app.griffith.edu.au/phonebook/phone-details.php?id=1675412">email me</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.seascapemodels\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>